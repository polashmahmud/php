# পিএইচপি ফাংশনাল প্রোগ্রামিং এবং Scope পরিচিতি{#understanding-functional-php-and-scope}

গত ৩টি ক্লাসে আমরা **PHP** এর গঠন-প্রণালি, ব্যবহার পদ্ধতি, তার একেকটি শক্তিশালী বৈশিষ্ট্যসহ বিভিন্ন ধরণের সুবিধা-অসুবিধা ইত্যাদি দেখেছি। মোটকথা, একটি প্রোগ্রামিং ল্যাংগুয়েজ হিসেবে **PHP** তার অভ্যন্তরে যত ধরণের সৌন্দর্য বা বৈচিত্র ধারণ করে আমরা তার একটি ঝলক দেখেছি।

এখন প্রশ্ন হল, যতটুকু আমরা দেখেছি তাতে কি এটা ভাবা যায় যে **PHP** প্রোগ্রামিং ল্যাংগুয়েজটির শক্তিমত্তা আমাদের জানা হয়ে গেছে?

উত্তর নির্দ্বিধায় হবে, না। আমরা আসলে **PHP** এর আসল শক্তিমত্তা সম্পর্কে কিছুটা ধারণা পেয়েছি মাত্র। আমরা যা শিখেছি তা দিয়ে টুকটাক কাজ চালিয়ে নিতে পারব ঠিকই, কিন্তু দেখা যাবে একটা সহজ কাজ করতে আমাদের কি-বোর্ডে ঝড় তুলতে হবে।

কেন? ম্যাথমেটিকাল অপারেশন চালানোর সময় [(২য় ক্লাসে)](https://php.polashmahmud.com/class-02.html) আমরা কিছু ফাংশনের ব্যবহার দেখেছিলাম। যেগুলোকে আমরা **PHP** এর বিল্ট-ইন ফাংশন বলেছিলাম। সেখানে আমরা [*pi()*](https://php.polashmahmud.com/class-02.html#pi-function) নামে একটা বিল্ট-ইন ফাংশন দেখেছিলাম, যা আমাদেরকে ইউনিভার্সাল পাই-এর মান বের করে দিত। এখন ভাবুন তো, যদি ঐ ফাংশনটি না থাকত তাহলে আমাদেরকে পাই-এর মান বের করার জন্য কি কি করতে হত?

আপনি যেকোন প্রোগ্রামিং ল্যাংগুয়েজ কেন শিখবেন? যাতে তার সাহায্যে আপনি কম্পিউটারের সাথে কথা বলতে পারেন, ফলে কম্পিউটার আপনার একঘেয়ে বিরক্তিকর, দীর্ঘ এবং ভারী কাজগুলো খুব সহজেই দ্রুততার সাথে সম্পন্ন করতে পারে। তাই নয় কি?

এখন শুধু একটা পাই-এর মান বের করার জন্য আপনাকে যদি কি-বোর্ডে ঝড় তুলতে হয়, লাইনের পর লাইন কোড লিখতে হয়; তাহলে প্রোগ্রামিং ল্যাংগুয়েজ বা কম্পিউটার আপনার জীবন সহজ করল কোথায়? এটাতো একটি উদাহরণ মাত্র। আরও অসংখ্য কাজ যে বাকি আছে সেগুলোও বা কিভাবে করবেন?

**এখানেই আসে ফাংশনের কথা।**

## ফাংশন পরিচিতি{#function-introduction}

উপরের কথাগুলো যদি বুঝে থাকেন তাহলে আমরা এই সমীকরণে পৌঁছতে পারি যে ফাংশন আমাদের জীবন সহজ করে। কিন্তু কিভাবে? ফাংশন জিনিসটাই বা কি? কিভাবে কাজ করে? কিভাবে তৈরি হয়? ব্যবহার কিভাবে হয়? ফাংশন দেখলে বুঝব কিভাবে কিংবা ফাংশনের প্রকারভেদ কত ও কি কি?

এই ক্লাসে চলুন আমরা সবগুলোর উত্তর জানার চেষ্টা করি।

### ফাংশন কাকে বলে?

ফাংশনকে আপনি একটি ব্লক অব কোড, পিস অব কোড বা সেট অব কোড বলতে পারেন। *অর্থাৎ ফাংশন এক বা একাধিক কোড ইন্সট্রাকশনের নাম, যে কোডগুলো আপনি নির্দিষ্ট এক বা একাধিক কাজ সময়মতো আঞ্জাম দেয়ার জন্য একবার লিখে থাকেন এবং প্রয়োজন অনুসারে বারবার ব্যবহার করার প্রত্যাশা করেন।*

ফাংশনের পরিচয় দেখে আশা করি বুঝতে পারছেন, এটা আপনার জীবন কিভাবে সহজ করবে। ফাংশনের ব্যবহার একবার শিখে গেলে আপনি তারপর কি করবেন? একই প্যাটার্নের একাধিক কাজ (ধরেন উদাহরণস্বরূপ: ১০টা) প্রোগ্রামের বিভিন্ন জায়গায় করার প্রয়োজন পড়লে প্রত্যেকবারই নতুন নতুন কোড লিখবেন নাকি একবার একটা ফাংশন লিখে সেটা ব্যবহার করবেন। যদি বলেন ফাংশন লিখব, তাহলে জীবন তো সহজ হয়ে গেল তাইনা।

ঠিক তাই। বাস্তব জীবনে প্রোগ্রামিং করতে গিয়ে আপনি ১০ জায়গায় একই সমস্যার সমাধানকল্পে ১০টি কোড লিখে সময় নষ্ট করতে চাইবেন না। বরং কোনভাবে একবার সমস্যার সমাধান করতে পারলে সেই কোডটাই অল্প এফোর্ট দিয়ে ১০ জায়গায় চালিয়ে দিতে চাইবেন। ***এটাই ইফেক্টিভ প্রোগ্রামিং***।

**PHP** তে ফাংশন ঠিক এই দায়িত্বটাই পালন করে। আপনি কোন একটা সমস্যার সমাধান করতে একবার ফাংশন লিখবেন এবং যখন যেখানে যেভাবে প্রয়োজন ব্যবহার করবেন। প্রয়োজন না হলে করবেন না। আপনার হাতে যখন এমন শক্তি থাকবে তখন আর কিসের প্রয়োজন বলুন!

### পিএইচপির ফাংশনাল পাওয়ার

ফাংশন প্রতিটি প্রোগ্রামিং ল্যাংগুয়েজেই থাকে। নাহলে একসময় ল্যাংগুয়েজটি বিশেষত্ব হারায়। তবে ফাংশনাল প্রোগ্রামিংয়ের ময়দানে পিএইচপির শক্তিমত্তা ঈষৎ ঈর্ষণীয় বটে। কিভাবে?

পিএইচপি-তে 1000 টিরও বেশি বিল্ট-ইন ফাংশন রয়েছে। ফলে এমন হতে পারে যে আপনি কোন সমস্যা বা কাজ নিয়ে মাথা ঘামাচ্ছেন আর ভাবছেন যে ”এর জন্য ফাংশনটা কিভাবে লিখব?” পিএইচপির ফাংশনগুলো একটু ঘাঁটাঘাটি করলে হয়তো দেখতে পাবেন যে ঐ রিলেটেড ফাংশন আগে থেকেই করা আছে। কতটা চমৎকার বিষয় তাইনা?

আবার, এর পাশাপাশি আপনি আপনার ইউনিক সমস্যা সমাধানের জন্য স্পেসিফিক ফাংশনও লিখতে পারেন এবং মনমতো ব্যবহার করতে পারেন। কতটা সহজ এবং সুবিধাজনক বৈশিষ্ট্য, তাইনা বলুন।

তাহলে সংক্ষেপে বলা যায় যে, পিএইচপিতে ফাংশন একটি সহজ এবং সুবিধাজনক পদ্ধতি। যার অধীনে এক বা একাধিক কোড কোন সমস্যার সমাধানকল্পে প্রয়োজন অনুসারে লেখা হয় এবং যখন যেখানে প্রয়োজন পড়ে সুবিধামত তা ব্যবহার করা হয়। পাশাপাশি পিএইচপিতে অনেকগুলো বিল্ট-ইন ফাংশন থাকায় প্রোগ্রামারের জন্য এর ব্যবহার আরো সহজ এবং সুলভ হয়।

এখন জানব ফাংশন কিভাবে তৈরি করতে হয়।

## ফাংশন গঠন-প্রক্রিয়া এবং ব্যবহার পদ্ধতি

ফাংশন তৈরি করার জন্য প্রথমে [`function`](https://www.php.net/manual/en/functions.user-defined.php) এই কিওয়ার্ডটি ব্যবহার করতে হয়।

অতঃপর যে নামে ফাংশনটি তৈরি করতে চাইছেন তার নাম দিতে হয়।

অতঃপর *Parentheses* `()` লিখতে হয়। *Parentheses* `()` বা ১ম বন্ধনী মূলত প্যারামিটার লিখতে ব্যবহৃত হয়। প্যারামিটার কি জিনিস জানতে পড়ুন: [ফাংশন প্যারামিটার ও আর্গুমেন্টস কি](#ফাংশন-প্যারামিটার-আর্গুমেন্টস-কি)। যদি ফাংশনের কোন প্যারামিটার না থাকে, তবুও জেনারেল ফাংশন তৈরিতে এই *Parentheses* `()` লিখতে হয়।

অতঃপর *Curly braces* `{}` দিতে হয়। এই `{}` বা ২য় বন্ধনীর ভেতরে ফাংশনটি দিয়ে আমরা যা কিছু করতে চাই তা লিখতে হয়। একে আমরা ফাংশন বডিও বলতে পারি। ছোট থেকে ছোট, বড় থেকে বড় যেকোন ধরণের এবং সাইজের কোড আপনি এর ভেতর লিখতে পারেন। এর ভেতর সাধারণ লেখা ছাড়াও বিভিন্ন রকম লজিক বিল্ড করে যে কোন ধরণের প্রবলেম সলভিং কাজে একে ব্যবহার করতে পারেন।

তবে সাধারণত একটি বড় সমস্যাকে ব্রেক ডাউন করে প্রথমে ছোট ছোট সমস্যায় বা টাস্কে বিভক্ত করা হয়। অতঃপর প্রতিটি সমস্যা বা টাস্কের জন্য আলাদা ছোট ছোট ফাংশন লিখা হয়। বাস্তব জীবনে বড় কোন সমস্যার প্রয়োজনে এভাবেই ফাংশনের ব্যবহার দেখা যায়।

### ফাংশন তৈরির সিনট্যাক্স:—

```php
<?php
function functionName() {
    // code to be executed
}
```

### ফাংশন ব্যবহার পদ্ধতি

ফাংশন তৈরির পর ফাংশনটিকে ব্যবহার করতে হলে তাকে call বা invoke করতে হয়। সেক্ষেত্রে প্রথমে ফাংশনের নামটি দিতে হয়। অতঃপর *Parentheses* `()` দিতে হয়। ফাংশনে যদি প্যারামিটার সেট করা থাকে, তাহলে ফাংশন কল করার সময় – প্রত্যাশিত পরিমাণ অনুযায়ী – আর্গুমেন্ট এই *Parentheses* `()` এর ভেতর পাস করতে (চালাতে) হয়। যেমন:-

```php
<?php
functionName(); // call the function
```

[প্যারামিটার এবং আর্গুমেন্ট নিয়ে জানুন](#ফাংশন-প্যারামিটার-আর্গুমেন্টস-কি)।

##### আসুন একটি বাস্তব উদাহরণ দেখি

```php
<?php
function hello() {
    echo "Hello World!";
}

hello(); // call the function
```

আউটপুট:

```php
Hello World!
```

#### ফাংশন তৈরি এবং ব্যবহার সংক্রান্ত গুরুত্বপূর্ণ কিছু তথ্য

ফাংশনের নাম পিএইচপির অন্যান্য লেবেলের (উদাহরণস্বরুপ: *variable*) মতই হওয়া উচিত। তাই ভ্যারিয়েবল তৈরিতে আমরা যে রুলগুলো ফলো করেছি তাই এখানে ফলো করা উচিত। যেমন:-

1. ফাংশন নাম *letter* বা *underscore* `_` দিয়ে শুরু করা যেতে পারে,
2. ফাংশন নামের ভেতর *any number of letters*, *numbers* অথবা *underscores* থাকতে পারে,
3. ফাংশন নাম *numbers* দিয়ে শুরু করা যাবে না, নামের ভেতর কোন ধরণের সিম্বল বা সাইন ব্যবহার করা যাবে না।
4. কোডিং স্টান্ডার্ড অনুযায়ী ২ শব্দের ফাংশন নাম *camelCase* এ হওয়া উচিত। খেয়াল রাখবেন আপনার ফাংশন নেম যদি ২ শব্দবিশিষ্ট হয় তাহলে উভয় শব্দের মাঝে কোন স্পেস দেয়া যাবে না।
5. ফাংশন নাম *case-sensitive* নয়।
6. ফাংশনের নাম অর্থবোধক বা *declarative* হওয়া উচিত।
>অর্থাৎ ফাংশনটি কি কাজ বা সমাধান প্রদান করে নামকরণের সময় এই বিষয়টি খেয়াল রাখা উচিত এবং সে অনুযায়ী নামকরণ করা উচিত। তাই আমাদের পূর্ববর্তী উদাহরণে ফাংশনের কাজ অনুযায়ী তার নামকরণ সাধারণভাবে `hello()` না দিয়ে অর্থবোধক কিছু দিতে পারি। যেহেতু ফাংশনটি সম্ভাষণ বা অভিবাদনের কাজ করে, তাই আমরা তার নাম `writeMsg()` অথবা `greet()` দিতে পারি।

ফাংশনকে কল বা রেফার করার পূর্বে ডিফাইন বা তৈরি করে নিতে হবে। অর্থাৎ আপনি একটা ফাংশন কল করলেন, যেমন ধরুন:- `hello()` অথচ কোডের কোথাও এই ফাংশনটি তৈরিই করেননি; এমন কিছু করা যাবেনা।

হ্যাঁ যদি ফাংশনটি *conditionally* কোথাও ডিফাইন করেন তখনকার কথা আলাদা। সেক্ষেত্রেও ঐ ফাংশনটি কল করার পূর্বে তার ডিফাইন হয়ে যাওয়া জরুরী, যাতে কন্ডিশন সত্যি হলেই তাকে এক্সেস এবং কল করার সুযোগ তৈরি হয়। বুঝে না থাকলে নিন্মে উদাহরণ ২টি দেখুন:-

##### Conditional functions এর উদাহরণ:–

```php
<?php

$makefoo = true;

/* We can't call foo() from here 
   since it doesn't exist yet,
   but we can call bar() */

bar();

if ($makefoo) {
  function foo()
  {
    echo "I don't exist until program execution reaches me.\n";
  }
}

/* Now we can safely call foo()
   since $makefoo evaluated to true */

if ($makefoo) foo();

function bar() 
{
  echo "I exist immediately upon program start.\n";
}
```

##### Functions within functions এর উদাহরণ:–

```php
<?php
function foo() 
{
  function bar() 
  {
    echo "I don't exist until foo() is called.\n";
  }
}

/* We can't call bar() yet
   since it doesn't exist. */

foo();

/* Now we can call bar(),
   foo()'s processing has
   made it accessible. */

bar();
```

ফাংশন গ্লোবাল স্কোপে ডিফাইন করা হোক অথবা অন্য কোন ফাংশনের অভ্যন্তরে ডিফাইন করা হোক **PHP** তে সকল ফাংশনই গ্লোবাল স্কোপে থাকে। অর্থাৎ ফাংশন যেখানেই ডিফাইন করা হোক আপনি তাকে সবজায়গা থেকেই কল করতে পারবেন। ভ্যারিয়েবলের মত ফাংশনের বেলায় ২টি স্কোপ নয়, একটিমাত্র স্কোপ এবং সেটি গ্লোবাল। স্কোপ নিয়ে এই ক্লাসেই আমরা জানব।

[পাইথন](https://www.python.org/) বা [জাভা](https://www.java.com/en/) ল্যাংগুয়েজের মত **PHP** ফাংশন *overloading* সাপোর্ট করেনা। ফাংশন *overloading* এর মাধ্যমে মূলত একটি ফাংশনকে *redefine* বা *redeclare* করা যায়। পাশাপাশি একই নামের ফাংশনকে একবার এক ধরণের প্যারামিটার সেট করে ব্যবহার করা যায়, অন্যবার অন্য ধরণের প্যারামিটার সেট করে ব্যবহার করা যায়। **PHP** তে একবার ফাংশন ডিফাইন করলে তাকে পুরো *script execution* এ আর *undefine*, *redefine* অথবা *overload* করা যায়না।

ফাংশন নাম যেহেতু *case-sensitive* নয়, তাই ফাংশন কল করার সময় যেকোন ভাবেই কল করা সম্ভব। তবে উত্তম এবং উচিত হল, যে ধারায় ফাংশন ডিফাইন হয় সে ধারায়ই তাকে কল করা।

## ফাংশন প্যারামিটার ও আর্গুমেন্টস কি?

ফাংশনের মধ্যে আপনি প্যারামিটার সেট করতে পারেন সেটা ইতিমধ্যেই জেনেছেন। কিন্তু প্যারামিটার আসলে কি?

চলুন সাধারণভাবে আমরা প্যারামিটার বোঝার চেষ্টা করি। আপনি ইতিমধ্যেই ভ্যারিয়েবল সম্পর্কে জেনেছেন। ভ্যারিয়েবল ইনিশিয়ালাইজ করা যেমন:-

```php
<?php
$var; // initialize variable without value
```
ভ্যারিয়েবলের ভ্যালু ডিফাইন করা যেমন:-

```php
<?php
$var = 'Value defined';
```
এগুলো [প্রথম ক্লাসেই](https://php.polashmahmud.com/class-01.html#non-initialized-variable-concept) জেনেছেন।

ঠিক একই ভাবে আপনি ফাংশন প্যারামিটারকে শুধুমাত্র ফাংশনের মধ্যে ব্যবহারযোগ্য ভ্যারিয়েবল হিসেবে বিবেচনা করতে পারেন। তাই আপনি যখন ফাংশনে কোন প্যারামিটার সেট করেন, তখন মূলত আপনি ঐ ফাংশনটিতে ব্যবহার করতে চান এমন এক বা একাধিক ভ্যালুর জন্য ভ্যারিয়েবল ইনিশিয়ালাইজ করেন। অতঃপর ফাংশন কল করার সময় আপনি ভ্যালুগুলো ডিফাইন করে দেন বা বলতে পারি *pass* করে দেন।

তাহলে আমরা বলতে পারি, প্যারামিটার হচ্ছে ফাংশনের মধ্যে ডাটা পাঠানোর একটি মাধ্যম বা বাহক। আপনি প্রথমে প্যারামিটার রূপে ডাটা স্টোর করার এক বা একাধিক ভ্যারিয়েবল সেট করেছেন। ডাটাগুলো পেলে ফাংশনটি কিভাবে বিহেভ করবে তা সেট করেছেন এবং সর্বশেষে ফাংশন কল করে কাঙ্খিত ডাটা পাঠিয়ে দিয়েছেন।

*এখন প্রশ্ন হল, প্যারামিটার কোথায় এবং কিভাবে সেট করতে হয়?*

আপনি যখন ফাংশন ডিফাইন করবেন তখন *Parentheses* () বা ১ম বন্ধনীর ভেতর প্যারামিটার সেট করতে হয়। [ভ্যারিয়েবল বা ফাংশনের নামকরণের](#ফাংশন-তৈরি-এবং-ব্যবহার-সংক্রান্ত-গুরুত্বপূর্ণ-কিছু-তথ্য) সময় যে বিষয়গুলো খেয়াল রাখতে হয় প্যারামিটারের নামকরণেও সেই একই বিষয় খেয়াল রাখতে হয়।

*একটি ফাংশনে আপনি কতগুলো প্যারামিটার  পারেন?*

অসংখ্য অগনিত প্যারামিটার সেট করতে পারেন। খেয়াল করার বিষয় হল, একাধিক প্যারামিটার সেট করলে প্রতিটি প্যারামিটারকে কমা `,` দিয়ে আলাদা করতে হবে।

*ফাংশনের প্যারামিটার লিখার সিনট্যাক্স হল:-*

```php
<?php
function functionName($parameter1, $parameter2, $parameter3) {
    // code to be executed
}
```

**এবার আসুন জানার চেষ্টা করি ফাংশন আর্গুমেন্ট কি।**

ফাংশন প্যারামিটারের কনসেপ্ট টা যদি বুঝে থাকেন তাহলে আর্গুমেন্ট আপনি হয়তো ইতিমধ্যেই বুঝে গেছেন। তবুও আরো পরিষ্কারভাবে বুঝতে চাইলে বলব, ফাংশনে আমরা তো প্যারামিটার সেট করেছি। যে আমাদের পাঠানো ভ্যালুগুলো ভ্যারিয়েবলের মত হোল্ড করবে। এখন ভ্যালুগুলো পাঠাবেন কি করে? উত্তর হল, আর্গুমেন্টের সাহায্যে বা বলতে পারি ফাংশনে আপনি যেকোন ভ্যালু শুধুমাত্র আর্গুমেন্টের মাধ্যমেই পাঠাতে পারবেন।

তাই বলতে পারি ফাংশন কল করার সময় যে ডাটা বা ভ্যালু আমরা পাস করি তাকে আর্গুমেন্ট বলে। মনে রাখবেন, আর্গুমেন্ট এবং প্যারামিটার শুধুমাত্র ২টি টার্ম। তাই আপনি চাইলে প্যারামিটারকে আর্গুমেন্ট এবং আর্গুমেন্টকে প্যারামিটার এভাবে *interchange* করে বলতে পারেন। প্রোগ্রামিং জীবনে অনেককেই এমনটা করতে দেখবেন। তাতে বিভ্রান্ত হবেননা।

তাহলে আর্গুমেন্ট কিভাবে পাস করব? উদাহরণ দেখি:-

```php
<?php
functionName($argument1, $argument2, $argument3);
```

এবার আসুন ২ টার সম্মিলিত উদাহরণ দেখি:-

```php
<?php
function sum($num1, $num2) { // two parameters in function definition
    $total = $num1 + $num2;
    echo "Sum of the two numbers $num1 and $num2 is : $total";
}

sum(10, 20); // argument values passed in function call as needed
```

আউটপুট:

```
Sum of the two numbers 10 and 20 is : 30
```

এবার আরো একটি উদাহরণ দেখি:-

```php
<?php
function familyName($fname) {
  echo "$fname Refsnes.<br>";
} // familyName function has one argument named ($fname)

/*
When the familyName() function is called,
we also pass along a name (e.g. Jani, etc.),
the name is used inside the function,
which outputs several different first names, but an equal last name:
*/
familyName("Jani");
familyName("Hege");
familyName("Stale");
familyName("Kai Jim");
familyName("Borge");
```

আউটপুট:

```
Jani Refsnes.
Hege Refsnes.
Stale Refsnes.
Kai Jim Refsnes.
Borge Refsnes.
```

আরেকটি উদাহরণ দেখিঃ

```php
<?php
function familyName($fname, $year) {
  echo "$fname Refsnes. Born in $year <br>";
}

familyName("Hege", "1975");
familyName("Stale", "1978");
familyName("Kai Jim", "1983");
```

আউটপুট:

```
Hege Refsnes. Born in 1975
Stale Refsnes. Born in 1978
Kai Jim Refsnes. Born in 1983
```

*প্যারামিটার ও আর্গুমেন্ট নিয়ে তো জানলাম। এখন কি?*

চলুন পিএইচপির ফাংশনাল পাওয়ার সম্পর্কে আরো কিছু জানি।

পিএইচপির ডাটা টাইপ সম্পর্কে আমরা [প্রথম ক্লাসেই](https://php.polashmahmud.com/class-01.html#types-of-data-in-php) জেনেছি। প্যারামিটার ও আর্গুমেন্ট নিয়ে যে উদাহরণগুলো উপরে দেখেছেন সেখানে একটা বিষয় কি আপনি খেয়াল করেছেন, আমরা কোন ফাংশনের আর্গুমেন্টে নাম্বার টাইপ ডাটা (পিএইচপির ভাষায় বললে ইন্টিজার) পাস করেছি, কোন ফাংশনে আবার স্ট্রিং টাইপ ডাটা পাস করেছি।

*প্রশ্ন হল, আমাদের ফাংশন বুঝতে পারছে কিভাবে কোনটা কি টাইপের ডাটা এবং সে অনুযায়ী কোনটার সাথে কি করা উচিত? কোনো সিস্টেম কি পিএইচপি ব্যবহার করছে যাতে ফাংশনগুলো কোনভাবে বুঝতে পারে কি ধরণের ডাটা তারা পাচ্ছে? থাকলে তা ব্যবহারের উপায় কি? নাকি ফাংশনের বেলায় এমন কিছু বিবেচনায় রাখা হয়না?*

চলুন নেক্সট টপিকে উত্তরগুলো মেলানোর চেষ্টা করি। তার আগে পিএইচপির একটি সুন্দর বৈশিষ্ট্য নিয়ে একটু জানি চলুন।

## Is PHP Loosely Typed?

পিএইচপিকে বলা হয় *Loosely Typed Language*। না, ভুল বুইঝেন না। কোন লুজ মেন্টালিটির মানুষ এইটা লিখেছে তা নয়। পিএইচপিকে তৈরি করা হয়েছে এমনভাবে যাতে আপনি যেকোন টাইপের ডাটা তাকে প্রদান করলে সে সেটা থেকে অর্থবোধক কিছু আপনাকে তৈরি করে দিতে পারে। অন্য অনেক ল্যাংগুয়েজের মত সে কোন ধরণের স্ট্রিক্ট বা কঠিন নিয়মের বেড়াজালে আপনাকে আটকে রাখেনি।

তাই আপনি যদি কোন ডাটা তৈরি বা পাস করার সময় তার প্রকৃতি পিএইচপিকে না বলেন, তবুও সে আপনার হয়ে ঐ ডাটার গতি-প্রকৃতি দেখে রানটাইমে তার জন্য যোগ্য ডাটা টাইপ নিজ থেকেই সেট করে দিবে। যেমন আপনি যেখানে পূর্ণ নাম্বার পাস করেছেন পিএইচপি সেই ডাটার টাইপ ইন্টিজার সেট করে দিবে, আবার যেখানে স্ট্রিং পাস করেছেন সেখানে ডাটা টাইপও স্ট্রিং সেট করে দিবে। এই কাজ পিএইচপি ইন্টার্নালি স্ক্রিপ্ট রান করার সময় করে থাকে।

*কিন্তু আপনি যদি ভুলবশত যেখানে ইন্টিজার নাম্বার প্রত্যাশিত সেখানে সরাসরি নাম্বার না দিয়ে স্ট্রিংয়ের ভেতর নাম্বারটা দেন তখন কি হবে?*

যেমন ধরুন আপনি ৫ এর সাথে ৫ গুণ করতে চাইছেন। এখন এটি কোডে রূপান্তর করে আপনি কিভাবে লিখবেন? `5 * 5` এভাবে লিখলে তো হবে, কিন্তু আপনি যদি `5 * "5"` এভাবে লিখেন তখন কি হবে? আপনি কি সঠিক উত্তর পাবেন?

হ্যাঁ আপনি সঠিক উত্তরটিই পাবেন। কিন্তু কাজটা কেমন গোলমেলে হয়ে গেল না? ১টি নাম্বারের সাথে আরেকটি নাম্বারের গুণ হওয়া উচিত না? তো যেখানে নাম্বার প্রত্যাশিত ছিল সেখানে ভিন্ন একটি ডাটা টাইপ দিয়েও আপনি সঠিক উত্তরটি কিভাবে পাচ্ছেন?

কারণ পিএইচপি আপনার উদ্দেশ্য বুঝতে পেরে স্ট্রিং ৫ সংখ্যাকে ইন্টিজারে কনভার্ট করে অতঃপর গুণের কাজটি সেরেছে। তাই আপনি সঠিক উত্তর পেয়েছেন। এই যে, একটি *Fatal Error* খাওয়ার কাজ করেও আপনি সঠিক উত্তরটি পেলেন, পিএইচপি আপনাকে এরর দেয়া তো দূরের কথা বরং আপনার হয়ে ভুল ইনপুটকে সঠিক করে তারপর সঠিক আউটপুট দিল, এই সমস্ত কারণেই পিএইচপিকে *Loosely Typed Language* বলা হয়। যেখানে আপনি কোড স্টান্ডার্ড মেনে না চললেও পার পেয়ে যাবেন।

*এটার উপর নির্ভর করে রিয়াল ওয়ার্ল্ড প্রোগ্রামিংয়েও কি আপনি এমনটা করবেন?*

উত্তর হল, না করবেন না। এমনটা করলে আপনার প্রোগ্রাম বা এপ্লিকেশনে প্রচুর বাগ *(BUG)* সৃষ্টি হবে। ফলে একটা ইফেক্টিভ প্রোডাক্ট তৈরি হবে না এবং প্রতিযোগিতামূলক মার্কেটে আপনার প্রোডাক্ট টিকবে না। পাশাপাশি ইউজারদের যাচ্ছেতাই ইনপুট ঠিকমত স্যানিটাইজ না করলে এই দুর্বলতাকে কাজে লাগিয়ে হ্যাকাররা আপনার প্রোগ্রামে পেনেট্রেট করবে।

*এর প্রতিরোধ কি তাহলে?*

এর প্রতিরোধে পিএইচপি আপনাকে সুযোগ দিয়েছে প্রত্যাশিত ভ্যালুর ডাটা টাইপ নির্ধারণ করার। ভ্যারিয়েবল ডিক্লারেশন থেকে শুরু করে ফাংশনের প্যারামিটার সেট করাসহ সবজায়গায় আপনি ভ্যালুর ডাটা টাইপ সেট করে দিতে পারবেন।

ভ্যারিয়েবল ডিক্লারেশনে ডাটা টাইপ সেট করার প্রয়োজনীয়তা অনুভূত হয়না। আপনি যদি ইন্টিজার ভ্যালুই সেট করতে চান কোন ভ্যারিয়েবলে, তখন কেন অযথাই ফ্লোট ভ্যালু তাতে সেট করবেন এবং ডাটা টাইপ সেট করে আবার সেটাকে ইন্টিজারে কনভার্ট করবেন। সম্পূর্ণ অপ্রয়োজনীয় একটি কাজ। হ্যাঁ, যদি ভ্যারিয়েবলটির ভ্যালু ডাইনামিকালি ইউজারের ইনপুটের মাধ্যমে সেট হয়, সেক্ষেত্রে ডাটা টাইপ সেট করে ভ্যালুটা স্যানিটাইজ করা যেতে পারে এবং ইউজারকে স্পেসিফিক টাইপের ভ্যালু প্রদানে বাধ্য করা যেতে পারে।

ফাংশন প্যারামিটারের ব্যাপারটা প্রায় এরকমই। ফাংশন কল করার সময় আর্গুমেন্টে স্পেসিফিক টাইপের ভ্যালুর বদলে কেউ অপ্রত্যাশিত টাইপের ভ্যালু পাঠাতে পারে। এজন্য ফাংশন প্যারামিটার নির্ধারণ করার সময় ডাটা টাইপ সেট করার প্রয়োজনীয়তা অত্যাধিক। যাতে আর্গুমেন্ট পাস করতে গিয়ে কেউ ভুলভাল ইনপুট না দেয়।

এবার চলুন আগের টপিকের উত্তরগুলো খুঁজে বের করি।

## প্যারামিটার/আর্গুমেন্ট ডাটা টাইপ নির্ধারণ

আমরা জেনেছি ফাংশনে ডাটা টাইপ নির্ধারণের প্রয়োজনীয়তা। কিভাবে? এবার সেটা জানি।

প্যারামিটার সেট করার সময় আমরা ডাটা টাইপ নির্ধারণ করতে পারি। সেক্ষেত্রে প্যারামিটার নামের আগে ডাটার টাইপটা বলে দিতে হবে। একে আমরা [type declarations](https://www.php.net/manual/en/language.types.declarations.php)-ও বলি।

ব্যবস্থায় *PHP 7* থেকে ইন্ট্রোডিউস করেছে স্ট্রিক্ট টাইপ ডিক্লারেশন।

```php
<?php
function addNumbers(int $a, int $b) {
  return $a + $b;
}
echo addNumbers(5, "5 days");
// since strict is NOT enabled "5 days" is changed to int(5), and it will return 10
```

আউটপুট:

```
10
```

উপরের উদাহরণগুলোতে দেখতে পাচ্ছেন যে আর্গুমেন্টের মাধ্যমে আমরা ফাংশনে আমাদের ডিরেক্ট ডাটা বা ভ্যালুগুলো পাস করছি। এটা ফাংশনে ভ্যালু পাস করার ডিফল্ট পদ্ধতি।

## Default Argument Value

আপনি চাইলে ফাংশনের প‍্যারামিটারের ডিফল্ট ভ‍্যালু সেট করে রাখতে পারবেন। 

```php
function makecoffee($type = "cappuccino")
{
    return "Making a cup of $type.\n";
}
echo makecoffee();
echo makecoffee(null);
echo makecoffee("espresso");
```

আউটপুট:

```php
Making a cup of cappuccino.
Making a cup of .
Making a cup of espresso.
```


```php
function makecoffee($types = array("cappuccino"), $coffeeMaker = NULL)
{
    $device = is_null($coffeeMaker) ? "hands" : $coffeeMaker;
    return "Making a cup of ".join(", ", $types)." with $device.\n";
}
echo makecoffee();
echo makecoffee(array("cappuccino", "lavazza"), "teapot");
```

আউটপুট:

```php
Making a cup of cappuccino with hands.
Making a cup of cappuccino, lavazza with teapot.
```
এখানে join একটি অ্যারের উপাদান থেকে একটি স্ট্রিং প্রদান করে।

```php
$a = [ 'a', 'b','c'];

echo join("=", $a);
```

আউটপুট:

```php
a=b=c
```

## PHP Functions - Returning values

একটি ফাংশনের মান ফেরত দিতে রিটার্ন কিওয়ার্ড ব‍্যবহার করা হয়। 

```php
function sum(int $x, int $y) {
  $z = $x + $y;
  return $z;
}

echo "5 + 10 = " . sum(5, 10) . "<br>";
echo "7 + 13 = " . sum(7, 13) . "<br>";
echo "2 + 4 = " . sum(2, 4);
```

আউটপুট:

```php
5 + 10 = 15
7 + 13 = 20
2 + 4 = 6
```

## PHP Return Type Declarations

```php
function addNumbers(float $a, float $b) : float 
{
  return $a + $b;
}
echo addNumbers(1.2, 5.2);
```

আউটপুট:

```php
6.4
```

**আরেকটি উদাহরণ**

```php
function addNumbers(float $a, float $b) : int {
  return (int)($a + $b);
}
echo addNumbers(1.2, 5.2);
```

আউটপুট:

```php
6
```

## Passing Arguments by Reference

```php
function add_five(&$value) {
  $value += 5;
}

$num = 2;
add_five($num);
echo $num;
```

আউটপুট:


```php
7
```

## আলাদা ফাইল তৈরি করা

আমরা চাইলে ফাংশনগুলো রি-ইউজ করবার জন‍্য আলাদা একটা ফাইল তৈরি করে ব‍্যবহার করতে পারি। আসলে ফাংশনের জন্য আলাদা পেজ ব্যবহার করার যুক্তিযুক্ত কিছু কারন রয়েছে। ফাংশনগুলো বিক্ষিপ্তভাবে থাকলে, বারবার ব্যবহার করতে গেলে বিভিন্ন সোর্স পাথ দিয়ে কল করাটা জটিল পর্যায়ে থাকে। ফাংশনগুলো পরবর্তীতে আরও ডাইনামিক করার জন্য আলাদাভাবে একটি পেজে বা একই অবস্থানে রাখলে সহজেই খুজে পাওয়া যায়।

`functions.php`
```php
<?php

// sum

function sum($a, $b) {
  return $a + $b;
}
```

`index.php`

```php
<?php

require_once 'functions.php';

echo sum(1, 2); // 3
```

## আনলিমিটেড আর্গুমেন্ট পাস করা

আপনি চাইলে ফাংশনে আনলিমিটেড আর্গুমেন্ট পাস করতে পারেন। 

```php
function sum(...$numbers) {
  $total = 0;
  foreach ($numbers as $n) {
    $total += $n;
  }
  return $total;
}

echo sum(1, 2, 3, 4, 5); // 15
```

## একটা বড় ফাংশনকে ছোট ছোট ফাংশনে ভাগ করা

আপনি চাইলে একটা বড় ফাংশনকে ছোট ছোট ফাংশনে ভাগ করতে পারেন। 

```php
function sum(...$numbers) {
  $total = 0;
  foreach ($numbers as $n) {
    $total += $n;
  }
  return $total;
}

function avg(...$numbers) {
  $total = sum(...$numbers);
  return $total / count($numbers);
}

echo avg(1, 2, 3, 4, 5); // 3
```

## ফাংশনের মধ্যে ফাংশন ব্যবহার করা

আপনি চাইলে ফাংশনের মধ্যে ফাংশন ব্যবহার করতে পারেন। 

```php

function sum(...$numbers) {
  $total = 0;
  foreach ($numbers as $n) {
    $total += $n;
  }
  return $total;
}

function avg(...$numbers) {
  $total = sum(...$numbers);
  return $total / count($numbers);
}

function avg_sum(...$numbers) {
  $average = avg(...$numbers);
  $total = sum(...$numbers);
  return "Average: $average, Sum: $total";
}

echo avg_sum(1, 2, 3, 4, 5); // Average: 3, Sum: 15
```

## Recursive Function

কোন ফাংশন যদি নিজে নিজে কল করে তাকে রিকার্সিভ ফাংশন বলে।

```php
function number($n)
{
    echo $n ."\n";
    
    $n++;
    
    number($n);
}

number(1);
```

```php
function factorial($n) {
  if($n <= 1) {
    return 1;
  }
  else {
    return $n * factorial($n - 1);
  }
}

echo factorial(5); // 120
```

## Scope and Global Variables

প্রোগ্রামিং-এ ভ্যারিয়েবলগুলোর অবস্থান কোথায় হবে তা নির্ধারণের জন্য "স্কোপ" ব্যবহৃত হয়। ফাংশনের মধ্যে ডিক্লেয়ার করা ভ্যারিয়েবলগুলো ফাংশনের বাইরে ব্যবহার করা যায় না। এই ধরনের ভ্যারিয়েবলগুলোকে লোকাল স্কোপ বা লোকাল ভ্যারিয়েবল বলে। আর ফাংশনের বাইরে ডিক্লেয়ার করা ভ্যারিয়েবলগুলোকে গ্লোবাল স্কোপ বা গ্লোবাল ভ্যারিয়েবল বলে।

```php
$x = 5; // global scope

function myTest() {
  // using x inside this function will generate an error
  echo "<p>Variable x inside function is: $x</p>";
}

myTest();

echo "<p>Variable x outside function is: $x</p>";
```

আউটপুট:

```php
Variable x inside function is:
Variable x outside function is: 5
```

## The global Keyword

আপনি চাইলে ফাংশনের মধ্যে গ্লোবাল ভ্যারিয়েবল ব্যবহার করতে পারেন। এটি করার জন‍্য `global` কিওয়ার্ড ব্যবহার করতে হয়।

```php
$x = 5;
$y = 10;

function myTest() {
  global $x, $y;
  $y = $x + $y;
}

myTest();

echo $y; // outputs 15
```

## The static Keyword

আপনি চাইলে ফাংশনের মধ্যে স্ট্যাটিক ভ্যারিয়েবল ব্যবহার করতে পারেন। এটি করার জন‍্য `static` কিওয়ার্ড ব্যবহার করতে হয়।

```php
function myTest() {
  static $x = 0;
  echo $x;
  $x++;
}

myTest();

myTest();

myTest();
```

আউটপুট:

```php
0
1
2
```
